{% extends 'base.html' %}
{% block body %}

{% if message %}
{{message}}
{% endif %}



{% load static %}
<script src={% static "angular-drag-and-drop-lists.js" %}></script>
<script src={% static "script.js" %}></script>


<div class="simpleDemo" ng-controller="SimpleDemoController">
    <ul dnd-list="list">
        <li ng-repeat="item in models.lists.A"
            dnd-draggable="item"
            dnd-moved="models.lists.A.splice($index, 1)"
            dnd-effect-allowed="move"
            dnd-selected="models.selected = item"
            ng-class="{'selected': models.selected === item}">
            {{item.label}} 
        </li>
    </ul>

    <ul dnd-list="list">
        <li ng-repeat="item in models.lists.B"
            dnd-draggable="item"
            dnd-moved="models.lists.B.splice($index, 1)"
            dnd-effect-allowed="move"
            dnd-selected="models.selected = item"
            ng-class="{'selected': models.selected === item}">
            {{item.label}}
        </li>
    </ul>
</div>


<div class="container">


<h1>Édition d'une proj</h1>

{% if p %}



<form action="{% url 'edit_proj' p.id %}" method="post">

    {% csrf_token %}

    <label for="titre">Titre :</label>
    <input id="titre" size="50" type="text" value="{{p.titre}}" name="titre"/>
    <br/><br/>

    <label for="image">Image (URL) :<label>
    <input id="image" size="100" type="text" name="image" value="{{p.image}}"/>
    <br/><br/>

    <label for="promo">Promo :<label>
            <input id="promo" type="number" name="promo" value="{{p.promo}}" min="1991" max="2030" step="1"/>
    <br/><br/>

    <label for="category">Catégorie :<label>
    <select name="category">
    {% for c in categories %}
        <option {% if p.category == c %} selected {% endif %} value="{{c.id}}">{{c.titre}}</option>
    {% endfor %}
    </select>
    <br/><br/>

    {% for r in p.relation_proj_set.all %}
        <input type="number" id="r_video_{{r.id}}" name ="r_video_{{r.id}}" value="{{r.ordre}}" max="999" min="-999"/>

        <label for="r_video_{{r.id}}">{{r.video.titre}}</label>
        <br/>
    {% endfor %}
    <br/>



    <input type="submit" value="Modifier la proj"/>


</form>

</div>
{% endif %}

{% endblock %}
